<!------- Container Fluid start ------->
<div class="container-fluid">
  <!------- Content area start ------->
  <div class="layout-specing">
    <!------- Page heading and breadcrumb ------->
    <div class="d-md-flex justify-content-between">
      <!------- Page heading ------->
      <h5 class="mb-0">Telimedicine Call Center Employees List</h5>

      <!------- Page breadcrumb ------->
      <nav class="d-inline-block mt-4 mt-sm-0">
        <ul class="breadcrumb bg-transparent rounded mb-0 p-0">
          <li class="breadcrumb-item">
            <a href="dashboard.html">Telimedicine</a>
          </li>
          <li class="breadcrumb-item active">Call Center</li>
        </ul>
      </nav>
    </div>

    <div class="row mt-4">
      <div class="col-lg-4 col-12 ms-auto text-end">
        <a (click)="onClick(add)" class="btn btn-primary">
          <i class="fa-solid fa-circle-plus me-1"></i>
          Add New Employee
        </a>
      </div>

      <div class="col-12 mt-4">
        <div class="table-responsive bg-white shadow rounded">
          <table class="table mb-0 table-center text-center">
            <thead class="text-center">
              <tr>
                <th class="border-bottom p-3">Employee Name</th>

                <th class="border-bottom p-3">Gender</th>

                <th class="border-bottom p-3" style="min-width: 100px">
                  Unique ID
                </th>

                <th class="border-bottom p-3">Employee Shift</th>

                <th class="border-bottom p-3" style="min-width: 100px">
                  Total doctor assigned
                </th>

                <th class="border-bottom p-3">Employee Contact</th>

                <th class="border-bottom p-3">Total patient booking</th>

                <th class="border-bottom p-3" style="min-width: 100px">
                  Total Casualties Booked
                </th>

                <th class="border-bottom p-3" style="min-width: 130px">
                  Action
                </th>
              </tr>
            </thead>

            <tbody class="text-center">
              @for (item of callData; track $index) {
              <tr>
                <td class="p-3">
                  <a href="#" class="text-dark">{{ item.name }}</a>
                </td>

                <td class="p-3">{{ item.gender }}</td>

                <td class="p-3">{{ item.uniqueId }}</td>

                <td class="p-3">{{ item.shift }}</td>

                <td class="p-3">34</td>

                <td class="p-3">{{ item.mobile }}</td>

                <td class="p-3">{{ item.totalBookings }}</td>

                <td class="p-3">{{ item.emergencyBookings }}</td>

                <td class="p-3">
                  <!------- View button ------->
                  <a
                    (click)="redirect(item.userId)"
                    class="btn btn-icon btn-pills btn-soft-primary"
                  >
                    <i class="fa-regular fa-eye"></i>
                  </a>

                  <!------- Edit button ------->
                  <a
                    (click)="onClick(block, item.id , item.status)"
                    class="btn btn-icon btn-pills btn-soft-danger ms-2"
                  >
                    <i class="fa-solid fa-lock"></i>
                  </a>
                </td>
              </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <!------- Content area end ------->
</div>
<!------- Container Fluid end ------->

<!-- Add employee modal -->
<ng-template #add let-modal>
  <div class="modal-content rounded shadow border-0">
    <div class="modal-header border-bottom">
      <h5 class="modal-title" id="LoginForm-title">Add New Employee</h5>

      <button
        type="button"
        class="btn btn-icon btn-close"
        (click)="modal.dismiss('cross click')"
      >
        <i class="fa-regular fs-4"></i>
      </button>
    </div>

    <div class="modal-body" [formGroup]="formData">
      <div class="p-2 rounded box-shadow">
        <div class="row">
          <!-- name -->
          <div class="col-lg-6 col-12">
            <div class="mb-3">
              <label class="form-label">
                Employee Name @if(Name && Name.invalid && Name.touched){
                <span class="text-danger">*</span>
                }
              </label>

              <input
                name="name"
                id="name"
                type="text"
                class="form-control"
                placeholder="Employee Name :"
                formControlName="name"
              />
            </div>
          </div>
          <!-- unique id -->
          <div class="col-lg-6 col-12">
            <div class="mb-3">
              <label class="form-label">
                Unique ID @if(UniqueId && UniqueId.invalid && UniqueId.touched){
                <span class="text-danger">*</span>
                }
              </label>

              <input
                name="uniqueid"
                id="uniqueid"
                type="text"
                class="form-control"
                placeholder="Unique ID :"
                formControlName="uniqueId"
              />
            </div>
          </div>
          <!-- Mobile -->
          <div class="col-lg-6 col-12">
            <div class="mb-3">
              <label class="form-label">
                Mobile @if(Mobile && Mobile.invalid && Mobile.touched){
                @if(Mobile.hasError('pattern')){
                <span class="text-danger">*</span>
                }@else {
                <span class="text-danger">*</span>
                } }
              </label>

              <input
                name="name"
                id="name"
                type="number"
                class="form-control"
                placeholder="Mobile no :"
                formControlName="mobile"
              />
            </div>
          </div>
          <!-- Gender -->
          <div class="col-lg-6 col-12">
            <div class="mb-3">
              <label class="form-label">
                Employee Gender @if(Gender && Gender.invalid && Gender.touched){
                <span class="text-danger">*</span>
                }
              </label>

              <select class="form-select form-control" formControlName="gender">
                <option class="d-none">Select Employee Gender</option>
                <option>Male</option>
                <option>Female</option>
              </select>
            </div>
          </div>
          <!-- Email -->
          <div class="col-lg-12 col-12">
            <div class="mb-3">
              <label class="form-label">
                Employee Email
                @if(Email && Email.invalid && Email.touched){
                  @if(Email.hasError('email')){
                    <span class="text-danger">*</span>
                  }@else {
                    <span class="text-danger">*</span>
                  }
                }
              </label>

              <input
                name="email"
                id="email"
                type="email"
                class="form-control"
                placeholder="Employee Email :"
                formControlName="email"
              />
            </div>
          </div>
          <!-- Shift Allotment -->
          <div class="col-lg-12 col-12">
            <div class="mb-3">
              <label class="form-label">
                Shift Allotment @if(Shift && Shift.invalid && Shift.touched){
                <span class="text-danger">*</span>
                }
              </label>

              <select class="form-select form-control" formControlName="shift">
                <option class="d-none">Select Employee Shift</option>
                <option>8AM - 12PM</option>
                <option>12PM - 4PM</option>
                <option>4PM - 8PM</option>
              </select>
            </div>
          </div>
          <!-- Address -->
          <div class="col-lg-12 col-12">
            <div class="mb-3">
              <label class="form-label"
                >Address @if(Address && Address.invalid && Address.touched){
                <span class="text-danger">*</span>
                }
              </label>

              <textarea
                id="comments"
                rows="2"
                class="form-control"
                placeholder="Employee address :"
                formControlName="address"
              ></textarea>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button
        type="button"
        class="btn btn-secondary"
        (click)="modal.dismiss('Cancel click')"
      >
        Close
      </button>
      <a (click)="onSubmit()" class="btn btn-primary">Add Employee</a>
    </div>
  </div>
</ng-template>

<!-- Block/Unblock employee modal -->
<ng-template #block let-modal>
  <div class="modal-content rounded shadow border-0">
    <div class="modal-body py-5">
      <div class="text-center">
        <div
          class="icon d-flex align-items-center justify-content-center bg-soft-danger rounded-circle mx-auto"
          style="height: 95px; width: 95px"
        >
          <h1 class="mb-0">
            <i class="fa-solid fa-ban"></i>
          </h1>
        </div>

        <div class="mt-4">
          <h4>
            {{isblock=="active"? 'Are you sure to block this employee': 'Are you sure to unblock this employee'}}</h4>

          <div class="mt-4">
            <a class="btn btn-danger" (click)="blockStatus()"> Yes! {{isblock=="active"? 'Block':'Unblock'}} </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
